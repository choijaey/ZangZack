<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="../css/ming/member/review.css" rel="stylesheet">
</head>
<body>
<div class="logo">
		<a href="home.me"><img src="../image/ming/member/logo.png" alt="logo"></a>
	</div>
	<aside class="sidebar">
		<div class="user">
			<img th:src="${loginUser.memberProfilePath}" style="width: 80px; height:80px; border-radius: 50%"></img><br><br>
			<p style="font-weight: bold; font-size: 1.5em;" th:text="${loginUser.memberName}"></p><br><br>
		</div>
		<ul class="links">
			<hr>
				<li>
					<img src="../image/ming/member/프로필수정.png" style="width: 60px;"></img>
					<a href="myPage.me">정보 수정</a>
				</li>
				<li th:if="${session.loginUser.memberLoginType == 1}">
					<img src="../image/ming/member/icons8-비밀번호-50.png" style="width: 60px;"></img>
					<a href="updatePwd.me">비밀번호 수정</a>
				</li>
				<li>
					<img src="../image/ming/member/리뷰.png" style="width: 60px;"></img>
					<a href="review.me">리뷰</a>
				</li>
				<li>
					<img src="../image/ming/member/택배.png" style="width: 60px;"></img>
					<a href="#">배송</a>
				</li>
				<li>
					<img src="../image/ming/member/택배.png" style="width: 60px;"></img>
					<a href="#">내가 쓴 게시글</a>
				</li>
				<li>
					<img src="../image/ming/member/택배.png" style="width: 60px;"></img>
					<a href="#">내가 쓴 댓글</a>
				</li>
			<hr>
				<li>
					<img src="../image/ming/member/icons8-쇼핑몰-50.png" style="width: 60px;"></img>
					<a href="#">쇼핑몰 이동</a>
				</li>
				<li>
					<img src="../image/ming/member/리뷰.png" style="width: 60px;"></img>
					<a href="#">커뮤니티 이동</a>
				</li>
				<li>
					<img src="../image/ming/member/logout.png" style="width: 60px;"></img>
					<a href="logout.me">로그아웃</a>
				</li>
				<li id="deleteMemberBtn">
					<img src="../image/ming/member/icons8-취소-100 (1).png" style="width: 60px;"></img>
					<a id="deleteMember">회원탈퇴</a>
				</li>
		</ul>
	</aside>
		<div id="myModal" class="modal">
	       <!-- 모달 내용 -->
	       <div class="modal-content">
	           	<h4 id="modalContent"></h4>
	           	<span id="modalResult"></span>
	       </div>
    	</div>
    	<!--------------------------------------------------------마이페이지 시작--------------------------------------------------------------------->
			<div class="my-reviews-container">
			  <h1>[[${loginUser.memberName}]]님의 작성한 리뷰</h1>
			  <div class="reviewPage">
				  <div class="review-list" th:each="r:${rList}">
				    <!-- 각 리뷰 아이템 -->
					    <div class="review-item">
					      <img th:each="ph:${phList}" th:if="${ph.boardType == 6}" th:src="${ph.photoPath}" alt="리뷰 상품 이미지" class="review-product-image" style="position: relative; left: 20px;">
					    <div class="review-item_detail" th:each="p:${pList}" th:if="${r.productNo == p.productNo}">
							<span class="store">[[${p.productCompany}]]</span><br>
							<span class="product">[[${p.productName}]]</span>
						</div>
					      <div class="review-content" th:each="r:${rList}">
							 <div class="score" style="margin-left: 80%;">  
							    <div class="foreground" style="float: left;">
							        <span class="background" th:style="'width: ' + (${r.reviewScore} * 100 / 5) + '%;'"><!-- 4.8 x 100 / 5 = 96 퍼센트 계산 식.-->
							   </div>
							</div>
					        <span class="review-date" th:text="${r.reviewModifyDate == null ? r.reviewUploadDate : r.reviewModifyDate}"></span><br><br><br>
					        <div class="review-text" th:text="${r.reviewContent}">리뷰 내용이 여기에 표시됩니다.</div>
					        <div class="review-details">
					          <a href="updateReview.so" class="edit-review">편집</a>
					          <a href="deleteReview.so" class="delete-review">삭제</a>
					        </div>
					      </div>
					    </div>
				  </div>
			  	<div id="pagenation" th:with="loc=${loc}" th:if="${!rList.isEmpty}">
		            <ul>
		               <!-- 이전 버튼 -->
		               <li th:if="${pi.currentPage > 10}">
		                  <a th:href="@{${loc}(page=${pi.currentPage-10})}">&lt; 이전</a>
		               </li>
		                   <!-- 페이지 번호 -->
		                   <li th:each="p : ${#numbers.sequence(pi.startPage, pi.endPage)}">
		                      <th:block th:if="${search == null}">
		                     <a th:href="@{${loc}(page=${p})}" th:id="${p == pi.currentPage} ? 'check_page'">
		                          [[${p}]] 
		                      </a>
		                   </th:block>
		                   <th:block th:if="${search != null}">
		                      <a th:href="@{${loc}(page=${p}, searchCategory=${search.searchCategory}, searchText=${search.searchText})}" th:id="${p == pi.currentPage} ? 'check_page'">
		                         [[${p}]]
		                     </a>
		                   </th:block>
		               </li>
		                   <!-- 다음 버튼 -->
		                   <li th:if="${pi.maxPage >= 10 && pi.maxPage - pi.currentPage > 10}">
		                      <a th:href="@{${loc}(page=${pi.currentPage+10})}">다음 &gt;</a>
		                   </li>
		                 </ul>
	         		</div>
			  </div>
			</div>
			<!-- 페이징처리 -->
</body>
</html>