<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="css/sohwa/(admin)productList.css" rel="stylesheet">
</head>
<body>

	<div th:replace="~{common/admin :: admin}"></div>
	
	<br><br><br><br>
	
	<div id="productListWrapped">
		<h1>상품 관리</h1>
		<br>
		<div style="float:right;">
			<a href="productListN.so" style="margin-right:460px; text-decoration:none; color:gray;" id="trash"><img src="image/sohwa/icons8-trash-64.png" >휴지통</a>
			<button class="custom-btn btn-4" onclick="enrollPage();">상품등록</button>
			<th:block th:if="${pageStatus=='Y'}"><button class="custom-btn btn-5" onclick="updateStatus();">선택삭제</button></th:block>
			<th:block th:if="${pageStatus=='N'}"><button class="custom-btn btn-5" onclick="updateStatus();">선택복구</button></th:block>
			<div class="dropdown">
	             <button class="btn btn-secondary dropdown-toggle" id="dropdownMenuButton" type="button" data-bs-toggle="dropdown" aria-expanded="false">
	                 주문번호 검색
	             </button>
	             <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
	                 <li><a class="dropdown-item" href="#" onclick="showSearch('search1', '주문번호 검색')">주문번호 검색</a></li>
	                 <li><a class="dropdown-item" href="#" onclick="showSearch('search2', '주문자 명 검색')">주문자 명 검색</a></li>
	                 <li><a class="dropdown-item" href="#" onclick="showSearch('search3', '배송상태 검색')">배송상태 검색</a></li>
	            </ul>
	        </div>
				
			<div class="search" id="search1">
				<input type="text" placeholder="주문번호 입력">
		  		<a href="#"><img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png"></a>
			</div>
			<div class="search" id="search2" style="display: none;">
				<input type="text" placeholder="주문자 성함 입력">
		  		<a href="#"><img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png"></a>
			</div>
			<div class="search" id="search3" style="display: none;">
				<input type="text" placeholder="배송상태 입력">
		  		<a href="#"><img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png"></a>
			</div>
		</div>
		
		<table>
			<tr style="text-align:center; border-bottom:1px solid black; height:50px;">
				<th><input type="checkbox" id="allSelect"></th>
				<th>상품번호</th>
				<th>상품사진</th>
				<th>상품이름</th>
				<th>가격</th>
				<th></th>
			</tr>
			
			<th:block th:each="p:${pList}">
				<tr th:each="a:${aList}" th:if="${ p.productNo eq a.boardNo && a.photoLevel==0 }">
					<td><input type="checkbox"><input type="hidden" name="productNo" th:value="${p.productNo}"></td>
					<td>[[${p.productNo}]]</td>
					<td><img th:src="${a.photoPath}"></td>
					<td>[[${p.productName}]]</td>
					<td th:text="|${#numbers.formatDecimal(p.productPrice, 0, 'COMMA', 0, 'POINT')}원|"></td>
					<td>
						<th:block th:if="${pageStatus=='Y'}"><button style="margin-bottom:5px;" th:onclick="productDetail([[${p.productNo}]])">상품페이지로 이동</button><br></th:block>
						<button th:onclick="productUpdate([[${p.productNo}]])">상품 수정</button>
					</td>
				</tr>
			</th:block>
			
			
		</table>
		
		
		
		<nav aria-label="Page navigation example" style="float:right;">
		    <ul class="pagination">
		       <li class="page-item">
		         <a class="page-link" href="#" aria-label="Previous">
		           <span aria-hidden="true">&laquo;</span>
		         </a>
		       </li>
		       <li class="page-item"><a class="page-link" href="#">1</a></li>
		       <li class="page-item"><a class="page-link" href="#">2</a></li>
		       <li class="page-item"><a class="page-link" href="#">3</a></li>
		       <li class="page-item"><a class="page-link" href="#">4</a></li>
		       <li class="page-item"><a class="page-link" href="#">5</a></li>
		       <li class="page-item">
		       <a class="page-link" href="#" aria-label="Next">
		           <span aria-hidden="true">&raquo;</span>
		       </a>
		       </li>
		    </ul>
		</nav>
		
		
	</div>
	
	
	
	
	<br><br><br><br><!--footer--><br><br><br><br>
	
	
	
	
	
	
	
	
	<script>
		//체크박스 전체선택
        document.addEventListener('DOMContentLoaded', function () {
            const allSelectCheckbox = document.getElementById('allSelect');
            const checkboxes = document.querySelectorAll('#productListWrapped input[type="checkbox"]');
            
            allSelectCheckbox.addEventListener('change', function () {
                checkboxes.forEach(function (checkbox) {
                    checkbox.checked = allSelectCheckbox.checked;
                });
            });
            
            checkboxes.forEach(function (checkbox) {
                checkbox.addEventListener('change', function () {
                    let allChecked = true;
                    checkboxes.forEach(function (c) {
                        if (!c.checked) {
                            allChecked = false;
                        }
                    });
                    allSelectCheckbox.checked = allChecked;
                });
            });
        });
        
        
        
        //드롭다운 변경
		function showSearch(searchId, dropdownText) {
            document.querySelectorAll('.search').forEach(function(searchElement) {
                searchElement.style.display = 'none';
            });
            document.getElementById(searchId).style.display = 'block';
            document.getElementById('dropdownMenuButton').innerText = dropdownText;
        }
        
        
        
        
        //상품등록페이지 이동
        function enrollPage(){
        	location.href='adminProductEnroll.so';
        }
        
        //상품상세페이지 이동
        function productDetail(productNo){
        	location.href='productDetail.so?productNo=' + productNo;
        }
        
        //상품수정페이지 이동
        function productUpdate(productNo){
        	location.href='adminProductUpdate.so?productNo=' + productNo;
        }
        
        //상품삭제 및 복구
        function updateStatus(){
        	
        }
    </script>

</body>
</html>