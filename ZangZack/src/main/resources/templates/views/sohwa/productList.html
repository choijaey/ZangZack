<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<link href="css/sohwa/productList.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
<title>Insert title here</title>
</head>
<body>
	<div th:replace="~{common/navbar :: navbar}"></div>
	
	<div id="wrapper">
		<div class="slider-container">
		<div class="slider">
	      <div class="inner-container">
	        <div class="slider__wrraper flex-column">
	          <div class="flex-column slider__content"></div>
	          <div class="slider__footer">
	            <div class="slider__btns justify-between">
	              <button class="slider__btn-buy">buy</button>
	              <div class="flex-center">
	                <button data-type="prev" class="slider__btn-switch slider__btn-switch--dark flex-center"></button>
	                <button data-type="next" class="slider__btn-switch slider__btn-switch--light flex-center"></button>
	              </div>
	            </div>
	            <div class="slider__index"></div>
	          </div>
	        </div>
	      </div>
	    </div>
	  
	    
	     <div class="additional-section">
			 <div class="category">
			 	<div onclick="sendCategoryNo(0)"><img src="image/sohwa/tent.png">전체</div>
			     <div onclick="sendCategoryNo(11)"><img src="image/sohwa/tent-removebg-preview.png">텐트</div>
			     <div onclick="sendCategoryNo(12)"><img src="image/sohwa/bed.png">취침용품</div>
			     <div onclick="sendCategoryNo(13)"><img src="image/sohwa/cook.png">조리도구</div>
			     <div onclick="sendCategoryNo(14)"><img src="image/sohwa/fire.png">발화용품</div>
			     <div onclick="sendCategoryNo(15)"><img src="image/sohwa/bag.png">백팩</div>
			     <div onclick="sendCategoryNo(16)"><img src="image/sohwa/other.png">기타용품</div>
			 </div>
			
			
			<form id="categoryForm" action="productListView.so">
			    <input type="hidden" name="categoryNo" id="categoryNoInput" value="0">
			</form>
	
	
			<div class="search">			
		  		<input id="searchInput" type="text" placeholder="상품명 검색" th:value="${keyword}">
		  		<img id="searchImg" src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png">
			</div>
			
			<div class="dropdown" style="background-color: white !important; color:black;">
		  		<button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
		    		등록일자 순
		  		</button>
		  		<ul class="dropdown-menu">
		  			<li><a class="dropdown-item" th:href="'productListView.so?categoryNo=' +${categoryNo} + '&keyword=' + ${keyword} + '&standard=1'">등록 일자 순</a></li>
		    		<li><a class="dropdown-item" th:href="'productListView.so?categoryNo=' +${categoryNo} + '&keyword=' + ${keyword} + '&standard=2'">낮은 가격 순</a></li>
		    		<li><a class="dropdown-item" th:href="'productListView.so?categoryNo=' +${categoryNo} + '&keyword=' + ${keyword} + '&standard=3'">높은 가격 순</a></li>
		    		<li><a class="dropdown-item" th:href="'productListView.so?categoryNo=' +${categoryNo} + '&keyword=' + ${keyword} + '&standard=4'">평점 높은 순</a></li>
		  		</ul>
			</div>
			
		  <main>
			  <h1>MD's PICK ></h1>
		  	  <section class="products pone">
					<div class="product-wrapper">
						<article class="product">
						    <a href="#"><img src="image/sohwa/cook2core1.jpg"></a>
					        <p>상품 설명이 들어가는 곳입니다. 상품에 대한 간략한 설명을 여기에 작성합니다.</p>
					        <p class="price">￦ 10,000</p>
					        <span class="starImage">
								<img src="image/sohwa/icons8-star.gif" style="height: 10px;">4.5 <span style="color:gray;">리뷰 20개</span></img>
							</span><br>
					        <span class="badge rounded-pill text-bg-dark">일시품절</span>
					        <span class="badge text-bg-secondary">무료배송</span>
					        <span class="badge text-bg-success">특가</span>
					      </article>
					      
					      <article class="product">
						    <a href="#"><img src="image/sohwa/fire2core1.png"></a>
					        <p>상품 설명이 들어가는 곳입니다. 상품에 대한 간략한 설명을 여기에 작성합니다.</p>
					        <p class="price">￦ 10,000</p>
					        <span class="starImage">
								<img src="image/sohwa/icons8-star.gif" style="height: 10px;">4.5 <span style="color:gray;">리뷰 20개</span></img>
							</span><br>
					        <span class="badge rounded-pill text-bg-dark">일시품절</span>
					        <span class="badge text-bg-secondary">무료배송</span>
					        <span class="badge text-bg-success">특가</span>
					      </article>
					      
					      <article class="product">
						    <a href="#"><img src="image/sohwa/fire1core1.png"></a>
					        <p>상품 설명이 들어가는 곳입니다. 상품에 대한 간략한 설명을 여기에 작성합니다.</p>
					        <p class="price">￦ 10,000</p>
					        <span class="starImage">
								<img src="image/sohwa/icons8-star.gif" style="height: 10px;">4.5 <span style="color:gray;">리뷰 20개</span></img>
							</span><br>
					        <span class="badge rounded-pill text-bg-dark">일시품절</span>
					        <span class="badge text-bg-secondary">무료배송</span>
					        <span class="badge text-bg-success">특가</span>
					      </article>
					      
					      <article class="product">
						    <a href="#"><img src="image/sohwa/cook2core1.jpg"></a>
					        <p>상품 설명이 들어가는 곳입니다. 상품에 대한 간략한 설명을 여기에 작성합니다.</p>
					        <p class="price">￦ 10,000</p>
					        <span class="starImage">
								<img src="image/sohwa/icons8-star.gif" style="height: 10px;">4.5 <span style="color:gray;">리뷰 20개</span></img>
							</span><br>
					        <span class="badge rounded-pill text-bg-dark">일시품절</span>
					        <span class="badge text-bg-secondary">무료배송</span>
					        <span class="badge text-bg-success">특가</span>
					      </article>
					      
					      <article class="product">
						    <a href="#"><img src="image/sohwa/cook2core1.jpg"></a>
					        <p>상품 설명이 들어가는 곳입니다. 상품에 대한 간략한 설명을 여기에 작성합니다.</p>
					        <p class="price">￦ 10,000</p>
					        <span class="starImage">
								<img src="image/sohwa/icons8-star.gif" style="height: 10px;">4.5 <span style="color:gray;">리뷰 20개</span></img>
							</span><br>
					        <span class="badge rounded-pill text-bg-dark">일시품절</span>
					        <span class="badge text-bg-secondary">무료배송</span>
					        <span class="badge text-bg-success">특가</span>
					      </article>
					      
					      <article class="product">
						    <a href="#"><img src="image/sohwa/cook2core1.jpg"></a>
					        <p>상품 설명이 들어가는 곳입니다. 상품에 대한 간략한 설명을 여기에 작성합니다.</p>
					        <p class="price">￦ 10,000</p>
					        <span class="starImage">
								<img src="image/sohwa/icons8-star.gif" style="height: 10px;">4.5 <span style="color:gray;">리뷰 20개</span></img>
							</span><br>
					        <span class="badge rounded-pill text-bg-dark">일시품절</span>
					        <span class="badge text-bg-secondary">무료배송</span>
					        <span class="badge text-bg-success">특가</span>
					      </article>
					      
					      <article class="product">
						    <a href="#"><img src="image/sohwa/cook2core1.jpg"></a>
					        <p>상품 설명이 들어가는 곳입니다. 상품에 대한 간략한 설명을 여기에 작성합니다.</p>
					        <p class="price">￦ 10,000</p>
					        <span class="starImage">
								<img src="image/sohwa/icons8-star.gif" style="height: 10px;">4.5 <span style="color:gray;">리뷰 20개</span></img>
							</span><br>
					        <span class="badge rounded-pill text-bg-dark">일시품절</span>
					        <span class="badge text-bg-secondary">무료배송</span>
					        <span class="badge text-bg-success">특가</span>
					      </article>
					      
					      <article class="product">
						    <a href="#"><img src="image/sohwa/cook2core1.jpg"></a>
					        <p>상품 설명이 들어가는 곳입니다. 상품에 대한 간략한 설명을 여기에 작성합니다.</p>
					        <p class="price">￦ 10,000</p>
					        <span class="starImage">
								<img src="image/sohwa/icons8-star.gif" style="height: 10px;">4.5 <span style="color:gray;">리뷰 20개</span></img>
							</span><br>
					        <span class="badge rounded-pill text-bg-dark">일시품절</span>
					        <span class="badge text-bg-secondary">무료배송</span>
					        <span class="badge text-bg-success">특가</span>
					      </article>
						
					</div>
		        </section>
		       
			    <div id="radio-box">
					<input type="radio" name="slide" id="prevBtn" checked>
			        <input type="radio" name="slide" id="nextBtn">
				</div>
		       
		       
		   </main>
		  
		   <main>
			  <h1>PRODUCT ></h1>
		  	  <section class="products">
		  	  <th:block th:each="p:${pList}">
		  	  	<article class="product" th:each="a:${aList}" th:if="${ p.productNo eq a.boardNo && a.boardType==5}" onclick="redirectToProductDetail(this)">
		  	  		<input type="hidden" th:value="${p.productNo}">
				    <a href="#"><img th:src="${a.photoPath}"></a>
			        <p>[[${p.productName}]]</p>
			        <p class="price" th:text="|${#numbers.formatDecimal(p.productPrice, 0, 'COMMA', 0, 'POINT')}원|"></p>
			        <span class="starImage" th:each="r, iterStat : ${rList}" th:if="${iterStat.index == 0 && p.productNo == r.productNo}">
						<img src="image/sohwa/icons8-star.gif" style="height: 10px;">[[${p.productScore}]] <span style="color:gray;">리뷰 [[${rList.size()}]]개</span></img>
					</span><br>
			        <th:block th:if="${p.eno == 0}"><span class="badge rounded-pill text-bg-dark">일시품절</span></th:block>
			        <th:block th:if="${p.deliveryPrice == 0}"><span class="badge text-bg-secondary">무료배송</span></th:block>
		      	</article>
		      	
		  	  </th:block>
	  	  		
		      	
<!-- 			      반복 샘플 -->
<!-- 			      <article class="product"> -->
<!-- 				    <a href="#"><img src="image/sohwa/cook2core1.jpg"></a> -->
<!-- 			        <p>상품 설명이 들어가는 곳입니다. 상품에 대한 간략한 설명을 여기에 작성합니다.</p> -->
<!-- 			        <p class="price">￦ 10,000</p> -->
<!-- 			        <span class="starImage"> -->
<!-- 						<img src="image/sohwa/icons8-star.gif" style="height: 10px;">4.5 <span style="color:gray;">리뷰 20개</span></img> -->
<!-- 					</span><br> -->
<!-- 			        <span class="badge rounded-pill text-bg-dark">일시품절</span> -->
<!-- 			        <span class="badge text-bg-secondary">무료배송</span> -->
<!-- 			        <span class="badge text-bg-success">특가</span> -->
<!-- 			      </article> -->
			      
		    </section>
		  </main>
		</div>
	</div>
	
	
	
	
	
	<nav aria-label="Standard pagination example" style="float: right;" th:with="loc=${loc}">
			<ul class="pagination">
       					<li class="page-item">
       						
       						<!-- 이전 페이지 장애  -->
       						<th:block th:if="${pi.currentPage<=1}">
       							<a class="page-link" aria-label="Previous">
        							<span aria-hidden="true">&laquo;</span>
          						</a>
       						</th:block>
       					
       					
       						<!-- 이전 페이지 -->
       						<th:block th:if="${pi.currentPage>1}">
       							<a class="page-link" th:href="@{${loc}(page=${pi.currentPage-1})}" aria-label="Previous">
        							<span aria-hidden="true">&laquo;</span>
          						</a>
       						</th:block>
        				</li>
        				
        				
        				<!-- 숫자 페이지 -->
      						<li class="page-item" th:each="p: ${#numbers.sequence(pi.startPage, pi.endPage)}">
      							<a class="page-link" th:href="@{${loc}(page=${p})}">
      								[[${ p }]]
      							</a>
      						</li>
       					
       					
       					
       					<li class="page-item">
       						<!-- 다음 페이지 장애 -->
       						<th:block th:if="${pi.currentPage>=pi.maxPage}">
       							<a class="page-link" aria-label="Next">
        							<span aria-hidden="true">&raquo;</span>
        						</a>
        					</th:block>
        					
        					<!-- 다음 페이지 -->
        					<th:block th:if="${pi.currentPage<pi.maxPage}">
        						<a class="page-link" th:href="@{${loc}(page=${pi.currentPage+1})}" aria-label="Next">
        							<span aria-hidden="true">&raquo;</span>
        						</a>
        					</th:block>
       					</li>
	    			</ul>
        		</nav>
	</div>
	
	
    
    
    <script>
		
		let intervalId; // 전역 변수로 setInterval을 담기 위한 변수

		function startSlideShow(intervalTime) {
		  intervalId = setInterval(() => {
		    // 'next' 버튼을 눌렀을 때와 동일한 효과를 내는 코드
		    slider.handleClick('next'); // slider는 현재 슬라이드를 관리하는 객체일 것입니다.
		  }, intervalTime);
		}
		
		function stopSlideShow() {
		  clearInterval(intervalId); // setInterval을 멈추는 함수
		}
		
		
		startSlideShow(5000);
			  
	  
	  
	  
	  
	  

		
		const items = [
		{
		    img: "image/sohwa/cook3core1-removebg-preview.png",
		    category: "cooking utensils",
		    title: "cold pack",
		    price: "\\16,910",
		    bgColor: "#dedede",
		  },
		  {
		    img: "image/sohwa/대표1-removebg-preview (2).png",
		    category: "Other products",
		    title: "dear shaped lights",
		    price: "\\ 17,000",
		    bgColor: "#ffe474",
		  },
		  {
		    img: "image/sohwa/대표2-removebg-preview.png",
		    category: "Other products",
		    title: "camping chair",
		    price: "\\20,100",
		    bgColor: "#d2e2d7",
		  },
		  {
		    img: "image/sohwa/cook2Detail2-removebg-preview.png",
		    category: "cooking utensils",
		    title: "mini brazier",
		    price: "\\19,800",
		    bgColor: "#f3c3be",
		  },
		  
		];
		
		const timeLine = gsap.timeline();
		
		class Slider {
		  constructor(items) {
		    this.active = 0;
		    this.items = items;
		    document
		      .querySelectorAll(".slider__btn-switch[data-type]")
		      .forEach((btn) => {
		        btn.onclick = () => this.handleClick(btn.dataset.type);
		      });
		  }
		
		  renderItem() {
		    const { img, category, title, price } = this.items[this.active];
		
		    const sliderContent = `
		      <img class="slider__img" src="${img}" alt="${title}" />
		      <div class="slider__context flex-column">
		        <h3 class="slider__category">${category}</h3>
		        <strong class="slider__title">${title}</strong>
		        <small class="slider__price">${price}</small>
		      </div>
		    `;
		    const sliderIndex = `
		      <span>${
		        this.active < 10 ? "0" + (this.active + 1) : this.active + 1
		      }</span>
		      <span>${
		        this.items.length < 10 ? "0" + this.items.length : this.items.length
		      }</span>
		    `;
		
		    document.querySelector(".slider__content").innerHTML = sliderContent;
		    document.querySelector(".slider__index").innerHTML = sliderIndex;
		  }
		
		  basicAimation(dir, delay) {
		    timeLine.to(".slider", {
		      delay,
		      duration: 0.2,
		      backgroundColor: `${items[this.active].bgColor}`,
		    });
		    timeLine.fromTo(
		      ".slider__img",
		      {
		        x: 150 * dir,
		        opacity: 0,
		        duration: 1,
		        ease: "power2.out",
		      },
		      {
		        x: 0,
		        opacity: 1,
		        duration: 1,
		        ease: "power2.out",
		      }
		    );
		    timeLine.fromTo(
		      ".slider__context *",
		      {
		        x: 50 * dir,
		        opacity: 0,
		        duration: 0.7,
		        stagger: 0.15,
		        ease: "power2.out",
		      },
		      {
		        x: 0,
		        opacity: 1,
		        duration: 0.7,
		        stagger: 0.15,
		        ease: "power2.out",
		      },
		      "<"
		    );
		  }
		
		  handleClick(type) {
		    const dir = type === "next" ? 1 : -1;
		    timeLine.to(".slider__img", {
		      x: -250 * dir,
		      opacity: 0,
		      duration: 1,
		      ease: "power2.inOut",
		
		      onComplete: () => {
		        if (type === "next") {
		          this.active = this.active === items.length - 1 ? 0 : this.active + 1;
		        } else {
		          this.active = this.active <= 0 ? items.length - 1 : this.active - 1;
		        }
		
		        this.renderItem();
		        this.basicAimation(dir);
		      },
		    });
		    timeLine.to(
		      " .slider__context *",
		      {
		        x: -100 * dir,
		        opacity: 0,
		        duration: 0.7,
		        stagger: 0.15,
		        ease: "power2.inOut",
		      },
		      "<"
		    );
		  }
		}
		
		const slider = new Slider(items);
		slider.renderItem();
		slider.basicAimation(1, 1);
		
		
		
		
		
		
		
		
		
		//MD's pick
	    const productWrapper = document.querySelector('.product-wrapper');
		const prevBtn = document.getElementById('prevBtn');
		const nextBtn = document.getElementById('nextBtn');
		const productCount = 4; // 보여질 상품 개수
		
		let currentPosition = 0;
		
		nextBtn.addEventListener('click', () => {
		  if (currentPosition < productWrapper.children.length / productCount - 1) {
		    currentPosition++;
		    productWrapper.style.transform = `translateX(-${currentPosition * 100}%)`;
		  }
		});
		
		prevBtn.addEventListener('click', () => {
		  if (currentPosition > 0) {
		    currentPosition--;
		    productWrapper.style.transform = `translateX(-${currentPosition * 100}%)`;
		  }
		});
		
		
		
		function sendCategoryNo(categoryNo){
			location.href='productListView.so?categoryNo='+ categoryNo +'&keyword=' + '&standard=1';
		}
		
		
		//검색
		document.getElementById('searchImg').addEventListener('click', ()=>{
			var searchInputValue = document.getElementById('searchInput').value;
		    var url = 'productListView.so?categoryNo=0&keyword=' + searchInputValue + '&standard=1' ;
		    window.location.href = url;
		})


		
		
		//상세보기
		function redirectToProductDetail(element) {
	        var hiddenInput = element.querySelector('input[type="hidden"]');
	        var productNo = hiddenInput.value;
	
	        // productNo를 query parameter로 사용하여 productDetail.so 엔드포인트로 이동
	        window.location.href = 'productDetail.so?productNo=' + productNo;
	    }

		
		
		    
		
		
	</script>

</body>
</html>