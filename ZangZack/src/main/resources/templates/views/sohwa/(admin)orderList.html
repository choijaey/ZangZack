<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="css/sohwa/(admin)orderList.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
</head>
<body>
	<div th:replace="~{common/admin :: admin}"></div>
	<br><br><br><br><br>
	
	<div id="orderListWrapped">
		<h1>결제 관리</h1>
		
		<button class="cateBtn active" onclick="toggleTable('allOrder', 'refundOrder')">전체 내역</button><button class="cateBtn" style="margin-left:40px;">환불요청내역</button>
		<div style="float:right;">
			<button style="background-color: white; color:black;">선택삭제</button>
			<div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" id="dropdownMenuButton" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    주문번호 검색
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <li><a class="dropdown-item" href="#" onclick="showSearch('search1', '주문번호 검색')">주문번호 검색</a></li>
                    <li><a class="dropdown-item" href="#" onclick="showSearch('search2', '주문자 성함 검색')">주문자 성함 검색</a></li>
                    <li><a class="dropdown-item" href="#" onclick="showSearch('search3', '배송상태 검색')">배송상태 검색</a></li>
                </ul>
            </div>
			
			<div class="search" id="search1">
				<input type="text" placeholder="주문번호 입력">
	  			<a href="#"><img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png"></a>
			</div>
			<div class="search" id="search2" style="display: none;">
				<input type="text" placeholder="주문자 성함 입력">
	  			<a href="#"><img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png"></a>
			</div>
			<div class="search" id="search3" style="display: none;">
				<input type="text" placeholder="배송상태 입력">
	  			<a href="#"><img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png"></a>
			</div>
			
		</div>
		
		
		<table id="allOrder">
			<tr style="border-bottom:2px solid black;">
<!-- 				<th class="td1" style="text-align:center;"><input type="checkbox" id="allSelect" onclick="toggleAllCheckboxes('allOrder', 'allSelect')"></th> -->
				<th class="td2" style="text-align:center;">주문번호</th>
				<th class="td3" style="text-align:center;">주문자 성함</th>
				<th class="td4" style="text-align:center;">주소</th>
				<th class="td5" style="text-align:center;">주문일자</th>
				<th class="td6" style="text-align:center;">배송상태</th>
			</tr>
			
			<tr class="trs" th:each="pa:${paList}">
<!-- 				<td class="td1"><input type="checkbox"></td> -->
				<input type="hidden" class="td1" th:value="${pa.orderKeyNo}">
				<td class="td2">[[${pa.orderNo}]]</td>
				<td class="td3">[[${pa.orderName}]]</td>
				<td class="td4">[[${pa.orderAddress.split('@')[1]}]] [[${pa.orderAddress.split('@')[2]}]]</td>
				<td class="td5">[[${pa.orderDate}]]</td>
				<td class="td6">[[${pa.deliveryStatus}]]</td>
			</tr>
			
			
		</table>
		
		
		
		
		
		
		
		<div id="pagination">
			<nav aria-label="Page navigation example">
			    <ul class="pagination">
			       <li class="page-item">
			         <a class="page-link" href="#" aria-label="Previous">
			           <span aria-hidden="true">&laquo;</span>
			         </a>
			       </li>
			       <li class="page-item"><a class="page-link" href="#">1</a></li>
			       <li class="page-item"><a class="page-link" href="#">2</a></li>
			       <li class="page-item"><a class="page-link" href="#">3</a></li>
			       <li class="page-item"><a class="page-link" href="#">4</a></li>
			       <li class="page-item"><a class="page-link" href="#">5</a></li>
			       <li class="page-item">
			       <a class="page-link" href="#" aria-label="Next">
			           <span aria-hidden="true">&raquo;</span>
			       </a>
			       </li>
			    </ul>
			</nav>
		</div>
	</div>




	<script>
		//체크박스 전체 선택/해제
        function toggleAllCheckboxes(tableId, selectId) {
	      const checkboxes = document.querySelectorAll(`#${tableId} input[type="checkbox"]:not(#${selectId})`);
	      const selectAll = document.getElementById(selectId);
	      const allChecked = selectAll.checked;
	
	      checkboxes.forEach(checkbox => {
	          checkbox.checked = allChecked;
	      });
	  }
      
      
      
		
		
		
		//드롭다운 변경
		function showSearch(searchId, dropdownText) {
            document.querySelectorAll('.search').forEach(function(searchElement) {
                searchElement.style.display = 'none';
            });
            document.getElementById(searchId).style.display = 'block';
            document.getElementById('dropdownMenuButton').innerText = dropdownText;
        }
		
		const trs = document.querySelectorAll('.trs');
		for(let i=0; i<trs.length; i++){
			trs[i].addEventListener('click',()=>{
				let orderKeyNo = trs[i].querySelector('.td1').value;
				location.href='adminOrderDetail.so?orderKeyNo=' + orderKeyNo;
			})
		}
    </script>

</body>
</html>